---
title: "HW 06 Part 2: Wrangling"
author: "Madison Hongsermeier-Baxter"
date: "`r format(Sys.time(), '%d %B %Y')`"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---

```{r}
library(tidyverse)
library(knitr)
install.packages("smatr")
library(smatr)
```

# darters

```{r}
file_path <- "~/Documents/BI485/hongsermeier-baxter_madison/data"
dat <- read.delim(file.path(file_path, "darters.txt"))
```

```{r}
start_pos <- c(1, 4, 15, 16, 17, 18, 21, 25, 29, 33, 36, 39, 40)
stop_pos <- c(3, 14, 15, 16, 17, 20, 24, 28, 32, 35, 38, 40, 41)
names <- c("specimen id", "species", "riffle", "age", "sex", "length", "depth", "velocity", "temperature", "majsub", "minsub", "majtype", "mintype")
darters <- read_fwf(file.path(file_path, "darters.txt"), fwf_positions(start_pos, stop_pos, col_names = names), skip = 15)
```

```{r}
darters
```

Use filter() to remove tetrazonum and zonale.

```{r}
darters2 <- darters %>%
  filter(!species %in% c("zonale", "tetrazonum"))
darters2
```

Sum together the majsub and minsub into a new column called total_substrate. Does total_substrate sum to 1 for all observations?

Yes, total_substrate sums to 1 for all observations.
```{r}
mutate(darters2,
  total_substrate = majsub + minsub
)
```

Change the riffle values of 1 and 2 to Riffle 1 and Riffle 2.
```{r}

```

Change the length data from centimeters to millimeters. It is more common to use mm for small fishes.
```{r}

```

Change the sex values of f and m to Female and Male.
```{r}

```

Use group_by() and summarize() to summarize the mean length, depth, and velocity for each species for each riffle. Use facet_wrap on riffles like you did in the last assignment.




    
   

The substrate was measured at each trap site. The relative proportion of the two most commmon substrate types (sand, fine gravel, small gravel, large gravel, and cobble) was estimated. The relative abundance of the most abundant substrate type was recorded as majsub. The less abundant substrate type was recorded as minsub. Together, majsub + minsub = 1. If they do not sum to 1, then there was a data recording error.

    Use mutate() to perform these wrangling tasks
        Sum together the majsub and minsub into a new column called total_substrate. Does total_substrate sum to 1 for all observations?
        Change the riffle values of 1 and 2 to Riffle 1 and Riffle 2.
        Change the length data from centimeters to millimeters. It is more common to use mm for small fishes.
        Change the sex values of f and m to Female and Male.
    Only total_substrate needs a new column. The other changes should use their own columns.

Summarize data

Use group_by() and summarize() to summarize the mean length, depth, and velocity for each species for each riffle. Save this summary to a different object than the original data. You will need both in the following plot. Use facet_wrap on riffles like you did in the last assignment.
Table results

    Use Make a table with the summary means.

Graph data

Plot 1

    Make a plot that uses the stat_summary() technique shown in R4ds section 3.7, reason 3 (scroll down, just before 3.7.1 Exercises) but use x = species and y = length.

    This will plot a point to show the median length, and draw a line from the shortest (min) to the longest (max) length to show the range of lengths for each species.

    Remember that ggplot2 uses a “layered grammar of graphics.” Add a geom_point() layer to add the mean length of each species to the plot. Use a filled square shape. You will have to use the summarized data set to get the mean for this geom.

Note: If you do not get a point in the next plot showing the mean for E. blennioides, then you did something wrong. What was it?

    Turn the plot so that the species are listed on the left axis and length on bottom axis.

    Add facet_wrap() to separate the two riffles.

    Add labs() so that length includes the appropriate unit of measurement in parentheses and that the species axis is not labeled (x = NULL).

How does the relationship of the median, mean, and range change between the two riffles? In other words, how does the size distribution change between the two riffles?

Plot 2

You probably noticed that the location of the median is not centered between the minimum and maximum values, even though the median is the middle value.

You decide that you could display the data more effectively. You want to show the individual measurements and emphasize the mean over the median. You also decide you want to try a slightly different way of graphing the data.

    Make a new plot with a geom_point() layer of length for each species. Change the point color to a lighter shade in the range of gray50 to gray70. The points should contrast against the overall gray background but they are not the main point of the graph.
    Add a stat_summary() layer with these arguments:
        fun.y = median
        geom = "point"
        size = 2.2
    Add another stat_summary(). Change the y function to mean, size to 3, and add the color = "15"maroon" argument.
    Facet, label, and flip the graph as you did above.

